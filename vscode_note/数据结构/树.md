# <center> 树 <center/>

## 1. 树的定义和性质

```
树是复杂的非线性数据结构，树和二叉树都是递归定义的。
```

1. 基本术语
   1. 度：一个结点的孩子个数称为该**结点的度**，树中结点的最大度数称为**树的度**。

   2. 层次、高度、深度：
      - 结点的层次：从树根开始为第一层。

      - 结点的高度、深度：结点的深度从根结点开始**自顶向下**累加，结点的深度从叶结点开始**自底向上**累加。
      - 树的深度（或高度）：树中结点的最大层数。
   3. 路径、路径长度：
      - 路径：指两个结点之间所经过的结点序列。

      - 路径长度：路径上所经过的边的个数。

2. **性质**
   1. **树的结点数 = 所有结点的度数之和 + 1 = 所有度的结点个数之和**。

   2. **树的结点数 = 树的边数（分支数）+ 1**。
   3. 由性质1可以推出：$n_0 + n_1 + n_2 +  \ldots + n_i = 0 * n_0 + 1 * n_1 + 2 * n_2 + i * n_i + 1 = n$。其中 $n$ 是树的结点数，$n_i$ 是度为 $i$ 的结点数。
        > 若森林中有15条边、25个结点，则森林中包含树的个数是？
        > 
        > [解答]：因为树的结点数 = 树的边数 + 1，而森林是树的集合，因此该森林的结点树 $F_n = \Sigma(B_i + 1)$，其中 $B_i$ 是第i棵树含的边数。假设该森林有m棵树，则：$F_n = 25 = 15 + m$。因此该森林含十棵树。

## 2. 二叉树的性质、存储结构

```
树和二叉树都是树形结构，二叉树并非树的特例。
```

1. 特殊的二叉树
   1. 满二叉树：
      - 高度为 $h$，且含有 $2^h-1$ 个结点的二叉树称为满二叉树。

      - **深度H与结点总数的关系**：$H = \log_2(N+1)$。

      > 非空满k叉树含有n个非终端结点，则其叶子结点数目为： 
      > 
      > [解答]：设该树有m层，满k叉树含有的结点总数为：$1 + k + k^2 + \ldots + k^{m-1} = (k^m-1)/(k-1)$。所以第m层结点的个数（即叶子结点的个数）为：$(k^m-1)/(k-1) - n = k^m-1$。整理解出即可。 

   2. 完全二叉树
      - 重要特征：**度为1的结点有且仅有一个（如果存在），且该结点只有左孩子，没有右孩子**。

      - **深度H与结点总数N的关系**：$H = \lfloor\log_2N\rfloor+1$。

      > 一棵有124个叶结点的完全二叉树，最多有多少个结点？
      > 
      > [解答]：由 $n = n_0 + n_1 + n_2$，$n_0 = 1 + n_2$，得 $n = 2*n_0 + n_1 - 1$，因为**完全二叉树上度为1的结点只有0个或者1个**，易知，当度为1的结点只有一个时结点数最多。
   3. 二叉排序树、平衡二叉树：见集合。
    ```
    二叉树和度为2的有序二叉树的区别：

    1. 二叉树可以为空，而度为2的有序二叉树至少含3个结点。
    2. 二叉树的结点次序是确定的。
    ```
2. 二叉树的性质
   1. $h$ 为树高，该树所含的结点数为 $2^{h-1} \lt n \leq 2^h -1$。

   2. n个结点可以构造出不同的二叉树的个数为：$\cfrac{C_{2n}^{n}}{n+1}$，即卡特兰数。
3. 二叉树的存储结构
   1. 顺序存储结构
        ```
        完全二叉树和满二叉树适合使用顺序存储。如果是一般的二叉树，使用顺序存储结构还需要用0填充空结点。
        ```
   2. 链式存储结构
        ```
        含有n个结点的二叉链表中含有n+1个空链域。
        ```

## 3. 二叉树的遍历算法

1. 前序、中序（对称序）、后序递归和非递归算法：

2. 由遍历序列构造二叉树：
   > 一棵二叉树的`前序遍历序列是ABCDEFG`，它的中序遍历序列可能是？
   > 
   >  (A).CABDEFG (B).ABCDEFG (C).DACEFBG (D).ADCFEG
   > 
   > [解答]：前序序列第一个元素是根，在中序序列里根把序列分为左右子树。再看前序第二个元素。(A)项左边是C，(C)项左边是D，(D)项左边为空，都不是前序序列的第二个结点B。

3. 遍历情况

    |前序和后序相同|前序和中序相同|中序和后序相同|前序和后序相反|前序和中序相反|中序和后序相反|
    |:---------:|:----------:|:----------:|:----------:|:------:|:-------:|
    |空树、<br>只有根节点的二叉树|空树、<br>缺左子树的单支二叉树|空树、<br>缺右子树的单支二叉树|空树、<br>只有左子树或只有右子树|空树、<br>缺右子树的单支二叉树|空树、<br>缺左子树的单支二叉树|   

## 4. 线索二叉树（穿线二叉树）

1. 二叉树的线索化：遍历二叉树，依次判断每个结点的左右链域，如果为空则改造为线索。**左链域指向前驱，右链域指向后继**。
   ```
   左右子树非空的二叉树线索化后，先序和后序线索化最多有1个空指针域，中序线索化最多有2个空指针域。
   ```

   > 左子树为空的二叉树先序线索化之后，空指针域的个数为？
   > 
   > [解答]：2个，分别是根结点的左链域和最后一个叶结点的右链域。画的时候注意，`左指针域只能连到它的前驱，右指针只能连到它的后继`。

2. 特点：**n个结点的线索二叉树上含有的线索数为n+1**。
3. 不足：二叉树在线索化后，仍不能解决两个问题：
   1. **先序线索二叉树中求先序的前驱**。

   2. **后序线索二叉树中求后续的后继**。

## 5. 树的存储结构，树、森林的遍历和二叉树的相互转换

1. 树的存储结构
   1. 双亲表示法：每个结点中有一个索引，用来指示双亲结点在数组中的位置。
      ```
      可以很快得到每个结点的双亲结点，但求结点的孩子时需要遍历整个结构。
      ```
      ```
      例如，下图的树用双亲表示法可以表示为：

      data     A B C D E F G
      parent  -1 0 0 0 1 1 3
      index    0 1 2 3 4 5 6
      ```

   2. 孩子表示法：每个结点的孩子结点都用单链表连接起来形成一个线性结构。n个结点就有n个孩子链表。
   3. 孩子兄弟表示法（二叉树表示法）：就是用二叉链表来存储树。
      ```
      和二叉树的的区别在于结点的右指针是指向下一个兄弟的指针。因此该法可以沿右指针找到所有兄弟结点。
      ```
      ![tree](pic/tree1.png)


2. 树、森林与二叉树的转换
   1. 树转为二叉树：将所有兄弟结点连线，对于每个结点只保留该结点与第一个孩子的连线。以树根作为二叉树的根结点。
      > 已知一棵有2011个结点的树，其叶结点个数为116，该树对应的二叉树中无右孩子的结点个数是？
      >
      > [解答]：**树转化为二叉树时，树的每个分支结点的所有子结点中的最右子结点无右孩子**，根节点转换以后也没有右孩子，因此对应二叉树中无右孩子的结点个数 = 分支结点数 + 1。本题亦可以采用特殊情况求解。 

   2. 森林转为二叉树：先将森林中的每棵树转化为二叉树，然后把第二棵树作为第一棵树右子树，以此类推。
   3. 二叉树转为森林：把二叉树根结点的右链断开，对所有新产生的二叉树都这么做直到没有右子树为止。
      ```
      二叉树转换为树和森林是唯一的。
      ```
3. 树和森林的遍历
   1. 树的遍历：树的先根遍历和后根遍历对应二叉树的先序遍历和后序遍历。

   2. 森林的遍历：森林的先序遍历对应二叉树的先序遍历。森林的中序遍历对应**树**的后根遍历，就是**最后再访问根结点**。

## 6. 树的应用

1. 哈夫曼树（最优二叉树）和哈夫曼编码。
   1. 构造：简单，懒得写了

   2. 性质：
      - n个待编码字符，构造出来的哈夫曼树含2n-1个结点。

      - **哈夫曼树每一个叶子结点对应一个码字**。
      - 哈夫曼树不是满二叉树，而是正则二叉树。
      - 哈夫曼树既可以保存各字符的编码，又可以检测编码是否具有前缀特性。
      > 一棵哈夫曼树有215个结点，对其进行哈夫曼编码，一共能得到多少个不同的码字？
      >
      > [解答]：本题就是求叶子结点的个数。
   3. **带权路径长度（WPL）**
      1. 结点的带权路径长度：树根到该结点的路径长度与该结点上的权值的乘积。

      2. 树的带权路径长度：所有叶结点的带权路径长度之和。

2. 并查集（不考）